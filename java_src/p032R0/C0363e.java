package p032R0;

import android.content.Context;
import android.graphics.Bitmap;
import android.util.Log;
import android.webkit.WebResourceRequest;
import android.webkit.WebResourceResponse;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import it.deviato.spotifuck.AppSingleton;
import it.deviato.spotifuck.R;
import java.io.ByteArrayInputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.HashMap;
import java.util.Map;
import p030Q0.AbstractC0328E;

/* renamed from: R0.e */
/* loaded from: classes.dex */
public final class C0363e extends WebViewClient {
    @Override // android.webkit.WebViewClient
    public final void onPageFinished(WebView webView, String str) {
        super.onPageFinished(webView, str);
        if (str.startsWith("https://www.facebook.com/privacy/consent/gdp/")) {
            webView.evaluateJavascript("(function(){document.querySelector('#facebook div[role=button]').click();})();", null);
        } else if (str.endsWith("/login")) {
            webView.evaluateJavascript("(function(){let gl=document.querySelector('section>div>div>div>div>a:first-child:not(.fuckd)');if(gl) {  let cl=document.createElement('a');  cl.className='fuckd';  cl.innerText='Email + Password Classic Login';  cl.style.cssText='display:block;padding:10px;margin:10px 0;color:white;font-weight:bold;text-decoration:none;border:1px solid #ddd;background:#339;border-radius:30px';  cl.href='?allow_password=1';  gl.parentNode.insertBefore(cl,gl);}})();", null);
        }
        if (!AppSingleton.f3430n) {
            webView.evaluateJavascript("(function() {let l=document.querySelector('button[data-testid=web-player-link]');if(l) { AndBridge.loginDetected(); l.click(); }})();", null);
            return;
        }
        String strM936f = AbstractC0328E.m936f(AbstractC0328E.m936f(AbstractC0328E.m936f(AppSingleton.f3434r ? "let reqPause=false,firstPlay=true,ulFlag=false,ffDone=false,npOpen=false;featVer=`web-player_${new Date().toISOString().split('T')[0]}_${Date.now()}_${Math.floor(Math.random()*0xFFFFFFF).toString(16).padStart(7,'0')}`;lastState=null;lastPos=null;playing=false;pfint=null;afint=null;cssint=null;aaint=null;window.updMedia=function(){  const currState=track+'|'+artist+'|'+playing+'|'+repmode+'|'+isfav;  if(currState!==lastState) {    lastState=currState;    const values={artist:artist,track:track,playing:playing,repeat:repmode,fav:isfav,duration:duration,position:position,cover:cover};    AndBridge.recMediaStatus(JSON.stringify(values));  }  else {    if(Math.abs(position-lastPos)>4000) AndBridge.recMediaPosition(position);    lastPos=position;  }};window.fetchAllLibrary=async function(){  const limit=50;  let offset=0;  let allItems=[];  let hasMore=true;  while(hasMore){    const resp=await oriFetch('https://api-partner.spotify.com/pathfinder/v2/query',{      method:'POST',      headers:{        'Authorization':window.spotAuthToken,'Client-Token':window.spotCliToken,'Content-Type':'application/json;charset=UTF-8'      },      body:JSON.stringify({        variables:{          filters:[],order:null,textFilter:'',features:['LIKED_SONGS','YOUR_EPISODES_V2','PRERELEASES','EVENTS'],          limit:limit,offset:offset,flatten:false,expandedFolders:[],folderUri:null,includeFoldersWhenFlattening:true        },        operationName:'libraryV3',        extensions:{          persistedQuery:{version:1,sha256Hash:'0082bf82412db50128add72dbdb73e2961d59100b9cbf41fb25c568bd8bc358b'}        }      })    });    if(!resp.ok){      const text=await resp.text();      throw new Error(`Error HTTP ${resp.status}: ${text}`);    }    const data=await resp.json();    const items=data?.data?.me?.libraryV3?.items||[];    allItems=allItems.concat(items);    if(items.length<limit) {      hasMore=false;    } else {      offset+=limit;    }  }  return allItems;};window.parseLibrary=function(items) {  const res={playlists:[],albums:[],artists:[],podcasts:[]};  items.forEach(({item})=>{    const data=item.data;    if(!data||!data.__typename) return;    switch(data.__typename) {      case 'PseudoPlaylist':        res.playlists.push({          id:data.uri,name:data.name,image:data.image?.sources?.[0]?.url||null        });        break;      case 'Playlist':        res.playlists.push({          id:data.uri,name:data.name,image:data.images?.items?.[0]?.sources?.[0]?.url||null        });        break;      case 'Album':        res.albums.push({          id:data.uri,name:data.name,image:data.coverArt?.sources?.[0]?.url||null,          artists:data.artists?.items?.map(a=>a.profile?.name).filter(Boolean)||[]        });        break;      case 'Artist':        res.artists.push({          id:data.uri,name:data.profile?.name,image:data.visuals?.avatarImage?.sources?.[0]?.url||null        });        break;      case 'Podcast':        res.podcasts.push({          id:data.uri,name:data.name,image:data.coverArt?.sources?.[0]?.url||null,          artists:data.publisher?.name?[data.publisher.name]:[]        });        break;      default:        break;    }  });  return res;};window.checkMediaLib=function(){  if(typeof window.mediaLib==='undefined'&&window.spotCliToken&&window.spotAuthToken&&window.spotDevId) {    fetchAllLibrary().then(allItems=>{      console.log('âœ… FetchAllLibrary OK. Items:'+allItems.length);      window.mediaLib=parseLibrary(allItems);    }).catch(err=>{      console.error('âŒ FetchAllLibrary Error:',err);    });  }};" : "let reqPause=false,firstPlay=true,ulFlag=false,ffDone=false,npOpen=false;featVer=`web-player_${new Date().toISOString().split('T')[0]}_${Date.now()}_${Math.floor(Math.random()*0xFFFFFFF).toString(16).padStart(7,'0')}`;lastState=null;lastPos=null;playing=false;pfint=null;afint=null;cssint=null;aaint=null;", "const oriFetch=window.fetch;window.fetch=async function(...args) {  const [url,opts]=args;  const ts=new Date().toISOString().slice(11,23);  const method=opts?.method?.toUpperCase?.()||'GET';  const headers=opts?.headers||{};  if(method==='POST'&&url.includes('/track-playback/v1/devices')&&opts?.body){    const body=JSON.parse(opts.body);    const deviceId=body?.device?.device_id;    if(deviceId&&deviceId!==window.spotDevId){      window.spotDevId=deviceId;      /*console.log(`ðŸŒ [${ts}] [${method}] â†’ ${url}`);      console.log('ðŸ“» Device ID body:',deviceId);*/      typeof checkMediaLib==='function'&&checkMediaLib();    }  }  else if(method==='POST'&&url.includes('/pathfinder/v2/query')&&opts?.body){    const body=JSON.parse(opts.body);    if(body?.operationName==='isCurated'){      const currUri=body?.variables?.uris?.[0];      if(currUri&&currUri!==window.currUri){        window.currUri=currUri;        /*console.log(`ðŸŒ [${ts}] [${method}] â†’ ${url}`);        console.log('ðŸŽµ Current URI:',currUri);*/      }    }  }  else {    let match=url.match(/\\/connect-state\\/v1\\/player\\/(?:command|transfer)\\/from\\/([^/]+)\\/to\\/([^/]+)/);    if(match?.[2]&&match[2]!==window.spotDevId) {      window.spotDevId=match[2];      /*console.log(`ðŸŒ [${ts}] [${method}] â†’ ${url}`);      console.log('ðŸ“» Device ID change:',window.spotDevId);*/      typeof checkMediaLib==='function'&&checkMediaLib();    }  }  const cliToken=headers['Client-Token']||headers['client-token'];  if(cliToken&&cliToken!==window.spotCliToken) {    window.spotCliToken=cliToken;    /*console.log(`ðŸŒ [${ts}] [${method}] â†’ ${url}`);    console.log('ðŸŽ§ Client Token found:',cliToken);*/    typeof checkMediaLib==='function'&&checkMediaLib();  }  const authHead=headers.Authorization||headers.authorization;  if(authHead?.startsWith('Bearer ')&&authHead!==window.spotAuthToken) {    window.spotAuthToken=authHead;    /*console.log(`ðŸŒ [${ts}] [${method}] â†’ ${url}`);    console.log('ðŸ”‘ Auth Token found:',authHead);*/    typeof checkMediaLib==='function'&&checkMediaLib();  }  if(ffDone&&url.includes('/track-playback/')&&method==='PUT') {    const paused=opts?.body?JSON.parse(opts?.body)?.state_ref?.paused:undefined;    if(paused===true&&playing) { console.log('#Track-Playback: Pause'); manageAll(false); }    else if(paused===false&&!playing) { console.log('#Track-Playback: Play'); manageAll(true); }  }  try {    const resp=await oriFetch(url,opts);    if(resp.status===404&&url.includes('connect-state')&&url.includes('/command/from/')) {      AndBridge.deferMessage('reload');      console.log('Player Locked: reload');      location.reload();    }"), "    return resp;  } catch(err) {    /*console.error('âŒ Error in Fetch Request:', err);    console.error('ðŸ” Name:', err.name);    console.error('ðŸ“„ Message:', err.message);    console.error('ðŸ“Œ Stack:', err.stack);*/    throw err;  }};window.playFromUri=function(uri) {  console.log('#PlayFromUri:'+uri);  let type=uri.match(/^spotify:([^:]+)/)?.[1];  if(type=='user') type='your_library';  oriFetch(`https://gew4-spclient.spotify.com/connect-state/v1/player/command/from/${window.spotDevId}/to/${window.spotDevId}`, {    method:'POST',    headers:{'Authorization':window.spotAuthToken,'Client-Token':window.spotCliToken,'Content-Type':'application/json'},    body:JSON.stringify({command:{        context:{uri:uri,url:'context://'+uri,metadata:{}},        play_origin:{          feature_identifier:type,          feature_version:featVer,          referrer_identifier:'your_library'},        options:{license:'tft',skip_to:{},player_options_override:{}},        /*logging_params:{          page_instance_ids:[crypto.randomUUID()],          interaction_ids:[crypto.randomUUID()],          command_id:crypto.randomUUID().replace(/-/g,'')        },*/endpoint:'play'}    })  });};window.firstFuck=function(){ if(pfint) clearInterval(pfint); pfint=setInterval(()=>{  /*console.log('pf_tick');*/  if(playing&&document.visibilityState=='hidden'&&!!document.querySelector('.VideoPlayer__container video')) AndBridge.wakeUp();  else if(!AndBridge.isWoke()&&document.visibilityState=='visible'&&!document.querySelector('.VideoPlayer__container video')) AndBridge.wakeOff();  if(typeof npBtn=='undefined') {    let lyBtn=document.querySelector('button[data-testid=lyrics-button]:not(.fuckd)');    if(lyBtn) {      lyBtn.classList.add('fuckd');      npBtn=document.createElement('button');      npBtn.className='npbtn';      npBtn.onclick=clickNP;      npBtn.innerHTML=`<svg viewBox=\"0 0 16 17\"><rect x=\"1\" y=\"0.75\" width=\"14\" height=\"15.5\" rx=\"2\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\"/><path d=\"M 6 5 L 6 5.9160156 L 9.6933594 8.5 L 6 11.080078 L 6 12 L 11 8.5 L 6 5 z\" stroke=\"currentColor\" stroke-width=\"1.2\"/></svg>`;      lyBtn.parentNode.insertBefore(npBtn,lyBtn);      closeNowPlay();    }  }  let pb=document.querySelector('aside button[data-testid=control-button-playpause]:not(.fuckd)');  if(pb) {    AndBridge.playLoaded();    console.log('#pBtn fuckd');    pb.classList.add('fuckd');    window.pBtn=pb;    pBtn.addEventListener('click',()=>{      console.log('PlayClicked');      if(pBtn.getAttribute('aria-label')!=='Play') {        console.log('Pause Req');        reqPause=true;        ulFlag=false;        manageWake(false);      }      else if(!ulFlag) {        reqPause=false;        manageWake(true);        console.log('Adding Unlocker');        ulFlag=true;        setTimeout(()=>{          console.log('Unlocker Timeout Reached');          if(ulFlag&&pBtn.getAttribute('aria-label')==='Play') {            AndBridge.deferMessage('unlock');            console.log('#Unlocking!');            actSkipForward();            trigUnlock();          }          else if(ulFlag) {            console.log('Playing, Removing Unlocker');            ulFlag=false;          }        },10000);      }    });    if(!ffDone){      ffDone=true;      AndBridge.manageTShut(true);      AndBridge.manageTSleep(false);      console.log('FirstFuck Adding All Features');      addAutoFeatures(); addCSSJSHack(); addAndAuto();      setTimeout(()=>{manageAll(playing)},10000);    }  } },5000);};firstFuck();window.manageWake=function(enable){  if(enable) {    if(document.visibilityState=='hidden') AndBridge.wakeUp();  }  else {    if(!AndBridge.isWoke()&&document.visibilityState=='visible') AndBridge.wakeOff();  }};window.manageAll=function(play){  playing=play;  typeof updMedia==='function'&&updMedia();  AndBridge.manageTShut(!play);  AndBridge.manageTSleep(play);  if(play) {    console.log('StartingIntervals');    firstFuck(); addAutoFeatures(); addCSSJSHack(); addAndAuto();  }  else {    console.log('KillingIntervals');    if(pfint) clearInterval(pfint);    if(afint) clearInterval(afint);    if(cssint) clearInterval(cssint);    if(aaint) clearInterval(aaint);  }};window.clickNP=function(){  let rBtn=document.querySelector('#Desktop_PanelContainer_Id').parentNode.parentNode.nextElementSibling.querySelector('button');  if(rBtn) {    let npHid=document.querySelector('#Desktop_PanelContainer_Id').parentNode.parentNode.ariaHidden;    if(npHid&&npHid=='true') npBtn.classList.add('active'); else npBtn.classList.remove('active');    rBtn.click();  }};window.closeNowPlay=function(){  let rc=document.querySelector('#Desktop_PanelContainer_Id');  if(rc&&rc.parentNode.parentNode.ariaHidden=='false') { console.log('#Close NowPlaying'); clickNP(); }};window.trigUnlock=function(){  let uint=setInterval(()=>{    if(pBtn.disabled) {      AndBridge.deferMessage('reload');      window.location.reload();    }    else if(pBtn.getAttribute('aria-label')!=='Play') {      clearInterval(uint);      ulFlag=false;      console.log('#Unlocked OK!');    }  },3000);};window.actPlayPause=function(play) {  console.log('PlayPause:'+play);  if('pBtn' in window) {    if(pBtn.getAttribute('aria-label')==='Play') { if(play) pBtn.click(); }    else { if(!play) pBtn.click(); }  }};window.actSkipBack=function() {  console.log('SkipBack');  let bb=document.querySelector('button[data-testid=control-button-skip-back]');  if(bb) { manageWake(true); bb.click(); }};window.actSkipForward=function() {  console.log('SkipForward');  let fb=document.querySelector('button[data-testid=control-button-skip-forward]');  if(fb) { manageWake(true); fb.click(); }};window.actRepeat=function() {  console.log('RepeatClick');  let rb=document.querySelector('button[data-testid=control-button-repeat]');  if(rb) {    if(repmode=='false') repmode='true'; else if(repmode=='true') repmode='mixed'; else repmode='false';    updMedia(); rb.click();  }};window.actAddToFav=function() {  console.log('AddToFav');  let fb=document.querySelector('div[data-testid=now-playing-widget]>div:last-child>button');  if(fb) {    if(fb.getAttribute('aria-checked')==='false') { fb.click(); isfav=true; updMedia(); }    else {      manageWake(true);      fb.click();      let rfint=setInterval(()=>{        manageWake(true);        let fr=document.querySelector('#context-menu button[role=menuitemcheckbox][aria-checked=true]');        if(fr) {          clearInterval(rfint);          fr.click();          setTimeout(()=>{            let sb=document.querySelector('#context-menu button[type=submit]');            if(sb) { sb.click(); isfav=false; updMedia(); }            manageWake(false);          },500);        }      },1000);    }  }};window.actSeek=function(pos) {  let rg=document.querySelector('div[data-testid=playback-progressbar] input[type=range]');  rg.value=pos+1;  rg.dispatchEvent(new Event('change',{bubbles:true}));};"), "window.addAutoFeatures=function(){  console.log('Adding AutoFeatures');");
        if (AppSingleton.f3427k.equals("onetime")) {
            strM936f = AbstractC0328E.m936f(strM936f, "  if('pBtn' in window&&firstPlay&&pBtn.getAttribute('aria-label')==='Play') {    console.log('#OneTime AutoPlay');    pBtn.click();    firstPlay=false;  }");
        }
        if (AppSingleton.f3432p || AppSingleton.f3431o || AppSingleton.f3427k.equals("permanent")) {
            String strM936f2 = AbstractC0328E.m936f(strM936f, "if(afint) clearInterval(afint);afint=setInterval(()=>{  /*console.log('af_tick');*/");
            if (AppSingleton.f3432p) {
                strM936f2 = AbstractC0328E.m936f(strM936f2, "  closeNowPlay();");
            }
            if (AppSingleton.f3431o) {
                strM936f2 = AbstractC0328E.m936f(strM936f2, "  let ft=document.querySelector('aside div.encore-bright-accent-set button');  if(ft) {    console.log('#Take Control');    ft.click();    setTimeout(()=>{      let cb=document.querySelector('aside ul[role=list] li[role=listitem] div[role=button]');      if(cb) cb.click();    },500);  }");
            }
            if (AppSingleton.f3427k.equals("permanent")) {
                strM936f2 = AbstractC0328E.m936f(strM936f2, "  if('pBtn' in window&&!reqPause&&!ulFlag&&pBtn.getAttribute('aria-label')==='Play') {console.log('#Permanent AutoPlay'); pBtn.click();}");
            }
            strM936f = AbstractC0328E.m936f(strM936f2, "},5000);");
        }
        String strM936f3 = AbstractC0328E.m936f(AbstractC0328E.m936f(strM936f, "};"), "window.addAndAuto=function(){");
        if (AppSingleton.f3434r) {
            strM936f3 = AbstractC0328E.m936f(strM936f3, "if(aaint) clearInterval(aaint);aaint=setInterval(()=>{  /*console.log('aa_tick');*/  let ta=document.querySelector('a[data-testid=context-item-link]');  if(ta) track=ta.text; else track=null;  let aa=document.querySelector('a[data-testid=context-item-info-artist]');  if(!aa) aa=document.querySelector('a[data-testid=context-item-info-show]');  if(aa) artist=aa.text; else artist='';  /*if('pBtn' in window&&pBtn.getAttribute('aria-label')==='Play') realplay=false; else realplay=true;*/  let rr=document.querySelector('button[data-testid=control-button-repeat]');  if(rr) repmode=rr.getAttribute('aria-checked'); else repmode='false';  let fb=document.querySelector('div[data-testid=now-playing-widget]>div:last-child>button');  if(fb&&fb.getAttribute('aria-checked')==='true') isfav=true; else isfav=false;   let rg=document.querySelector('div[data-testid=playback-progressbar] input[type=range]');  if(rg) { duration=parseInt(rg.getAttribute('max')); position=parseInt(rg.getAttribute('value')); }  else { duration=null; position=null; }  let im=document.querySelector('img[data-testid=cover-art-image]');  if(im) cover=im.src; else cover=null;  updMedia();},2000);");
        }
        String strM936f4 = AbstractC0328E.m936f(AbstractC0328E.m936f(strM936f3, "};"), "window.addCSSJSHack=function(){");
        if (AppSingleton.f3428l.equals("csshack")) {
            strM936f4 = AbstractC0328E.m936f(strM936f4, "if(cssint) clearInterval(cssint);cssint=setInterval(function(){  /*console.log('css_tick');*/  let lb=document.querySelector('#Desktop_LeftSidebar_Id header>div>div:first-child button:not(.fuckd)');  if(lb) {    console.log('LibBtnFuckd');    window.lBtn=lb;    lb.classList.add('fuckd','lbtn');    lb.style.padding=0;    lb.style.height='20px';    lb.addEventListener('click',function(){setTimeout(()=>switchLs(),0)});    switchLs();    AndBridge.cssInjected();  }  let lbit=document.querySelector('#Desktop_LeftSidebar_Id div[role=grid]:not(.fuckd)');  if(lbit) {    lbit.classList.add('fuckd');    lbit.addEventListener('click',()=>{setTimeout(()=>{      console.log('AutoCloseLib');      lBtn.click();      closeNowPlay();    },0)});  }  let hb=document.querySelector('#global-nav-bar button[data-testid=home-button]:not(.fuckd)');  if(hb) {    hb.classList.add('fuckd');    hb.addEventListener('click',()=>{ closeNowPlay(); });  }  let sr=document.querySelector('input[data-testid=search-input]:not(.fuckd)');  if(sr) {    sr.classList.add('fuckd');    sr.addEventListener('focus',()=>{      let npb=document.querySelector('aside[data-testid=now-playing-bar]');      if(npb) npb.style.display='none';      closeNowPlay();    });    sr.addEventListener('blur',()=>{      let npb=document.querySelector('aside[data-testid=now-playing-bar]');      if(npb) npb.style.display='flex';    });  }  let ub=document.querySelector('button[data-testid=user-widget-link]:not(.fuckd)');  if(ub) {    ub.classList.add('fuckd');    ub.addEventListener('click',()=>{ closeNowPlay(); });  }},5000);");
        }
        String strM936f5 = AbstractC0328E.m936f(strM936f4 + "window.switchLs=function(){  let ls=document.querySelector('#Desktop_LeftSidebar_Id');  if(ls) {    let exp=ls.querySelector('nav>div>div:first-child').classList.length;    if(exp==2) {      console.log('Expanded');      ls.style.position='fixed';      ls.style.width='100%';      ls.style.height='92%';      ls.style.left=0;      ls.style.zIndex=20;      let lh=ls.querySelector('header>div>div:first-child h1');      lh.innerHTML='âœ– &nbsp; " + AppSingleton.f3422f.getString(R.string.txt_closelib) + "';    }    else {      console.log('Collapsed');      ls.style.zIndex=1;      ls.style.position='fixed';      ls.style.top='0';      ls.style.left='60px';      ls.style.width='48px';      ls.style.height='48px';    }  }};", "};");
        if (AppSingleton.f3428l.equals("csshack")) {
            strM936f5 = AbstractC0328E.m936f(strM936f5, "let st=document.createElement('style');st.textContent='body{min-width:100%!important;min-height:100%!important} .os-scrollbar{--os-size:6px!important} .contentSpacing{padding:0} div[data-testid=root]{--panel-gap:0!important} #main-view+div,#main-view+div>div{overflow:hidden!important;width:auto} #main-view+div>div>div>div:nth-child(2)>div{width:100vw!important} div[data-encore-id=banner],#global-nav-bar>div:first-of-type,#global-nav-bar a[href=\"/download\"],button[data-testid=fullscreen-mode-button],div.main-view-container__mh-footer-container{display:none!important} section[data-testid=artist-page]>div>div:first-child:not([data-encore-id]){height:25vh} div[data-testid=tracklist-row]{padding:0 10px 0 0;grid-gap:0} div[data-testid=tracklist-row] button:not([data-testid=add-to-playlist-button]){transform:scale(1.3)!important;opacity:0.6!important} div[data-testid=tracklist-row] button:{-webkit-margin-end:0!important} div[data-testid=tracklist-row] button:hover{color:#2d6!important} div[data-testid=tracklist-row]>div:first-child>div:first-child{height:24px;min-height:24px;min-width:24px;margin:0 8px!important} [aria-colcount=\"3\"] div[data-testid=tracklist-row]{grid-template-columns:[index] var(--tracklist-index-column-width,40px) [first] minmax(120px,var(--col1,4fr)) [last] minmax(82px,var(--col2,1fr))!important} [aria-colcount=\"4\"] div[data-testid=tracklist-row]{grid-template-columns:[index] var(--tracklist-index-column-width,40px) [first] minmax(120px,var(--col1,4fr)) [var1] minmax(120px,var(--col2,2fr)) [last] minmax(82px,var(--col3,1fr))!important} [aria-colcount=\"5\"] div[data-testid=tracklist-row]{grid-template-columns:[index] var(--tracklist-index-column-width,40px) [first] minmax(120px,var(--col1,6fr)) [var1] minmax(120px,var(--col2,4fr)) [var2] minmax(120px,var(--col3,3fr)) [last] minmax(82px,var(--col4,1fr))!important} section[data-testid=track-page]>div.contentSpacing>div:nth-child(2) [aria-colcount=\"2\"] div[data-testid=tracklist-row]{grid-template-columns:[first] minmax(120px,var(--col0,4fr)) [last] minmax(82px,var(--col1,1fr))!important} section[data-testid=track-page]>div.contentSpacing>div:nth-child(2) [aria-colcount=\"3\"] div[data-testid=tracklist-row]{grid-template-columns:[first] minmax(120px,var(--col0,4fr)) [var1] minmax(120px,var(--col1,2fr)) [last] minmax(82px,var(--col2,1fr))!important} .npbtn{cursor:pointer;color:#b3b3b3;background:transparent;border:none;width:32px;height:32px;padding:8px} .npbtn.active{color:#1db954} *{--content-spacing:10px} section[data-testid=home-page] .contentSpacing{padding:0 10px!important;overflow:hidden} div[data-testid=grid-container]{margin-inline:0!important;column-gap:0!important;overflow:hidden!important} div[data-testid=action-bar-row],div[data-testid=topbar-content]{padding:5px 10px} div[data-testid=track-list]>div:first-child,div[data-testid=playlist-tracklist]>div:first-child{margin:0!important;padding:0!important} main>section:not([data-testid=artist-page])>div:first-child{height:auto!important;min-height:auto!important;padding:10px} section[data-testid=track-page]>div>div.contentSpacing>div:last-child{overflow:hidden} section[data-testid=artist-page]>div>div:first-child>div.contentSpacing{padding:10px} section[data-testid=artist-page] div[data-testid=grid-container] h2,section[data-testid=artist-page] section[data-testid=component-shelf]{padding:0 10px} main>section h1.encore-text-headline-large{font-size:22px!important} section[data-testid=artist-page] span.encore-text-headline-large{font-size:26px!important} section[data-testid=track-page] h1{font-size:20px!important} aside[data-testid=now-playing-bar]{min-width:100%!important;box-shadow:0 0 6px #440000;background:linear-gradient(to bottom,#770000,#330000)!important} aside[data-testid=now-playing-bar]>div:first-child{margin-top:2px;flex-direction:column!important;height:auto!important} aside[data-testid=now-playing-bar]>div>div{width:100%!important} aside[data-testid=now-playing-bar]>div>div:last-child>div{min-height:32px;margin:5px 10px} aside[data-testid=now-playing-bar]>div>div:last-child button{transform:scale(1.15);margin:0 5px} div[data-testid=general-controls]{margin:15px 0 25px} div[data-testid=general-controls] button{transform:scale(1.4)!important;margin:0 8px!important} div[data-testid=player-controls]{margin:5px 0} div[data-testid=now-playing-widget]{justify-content:center;overflow:hidden} form[role=search]{z-index:10;margin-left:48px;max-width:88%} div[data-testid=now-playing-widget]>div:last-child>button{transform:scale(1.3)} div[data-testid=now-playing-widget]>div:first-child{display:none!important} div[data-testid=now-playing-widget]>div:nth-child(2){display:flex!important;overflow:hidden!important} div[data-testid=now-playing-widget]>div:nth-child(2) span{font-size:13px!important;height:20px!important;margin:0!important} div[data-testid=now-playing-widget]>div:nth-child(2)>div{min-width:auto;max-width:66%} [data-tippy-root]{overflow:hidden!important} [data-tippy-root],[data-tippy-root] *{transition:none!important;transform:none!important} div[data-testid=hover-or-focus-tooltip],#Desktop_LeftSidebar_Id header>div>div:last-child{display:none!important}#Desktop_LeftSidebar_Id>nav>div{min-height:48px;border-radius:25px} .YourLibraryX{overflow:hidden;background:var(--background-elevated-base)!important}.YourLibraryX header{padding:14px} ';document.head.appendChild(st);");
        }
        if (AppSingleton.f3433q) {
            strM936f5 = AbstractC0328E.m936f(strM936f5, "let aled=document.createElement('style');aled.textContent='.encore-dark-theme{--background-base:#000;--background-highlight:#000;--background-elevated-base:#000;--background-elevated-highlight:#000;--background-elevated-press:#000;--background-tinted-base:#000}  aside[data-testid=now-playing-bar]{background:#000!important;box-shadow:none;border-top:1px solid #666}';document.head.appendChild(aled);");
        }
        webView.evaluateJavascript(strM936f5.replaceAll("console\\.log\\([^)]+\\);", ""), null);
    }

    @Override // android.webkit.WebViewClient
    public final void onPageStarted(WebView webView, String str, Bitmap bitmap) {
        Context context = AppSingleton.f3422f;
        webView.evaluateJavascript("(function(){window.screen.__defineGetter__('width',function(){return 1920;});window.screen.__defineGetter__('height',function(){return 1080;});window.screen.__defineGetter__('availWidth',function(){return 1920;});window.screen.__defineGetter__('availHeight',function(){return 1040;});window.__defineGetter__('innerWidth',function(){return 1920;});window.__defineGetter__('innerHeight',function(){return 978;});window.navigator.__defineGetter__('vendor',function(){return 'Google Inc.';});window.navigator.__defineGetter__('productSub',function(){return '20030107';});window.navigator.__defineGetter__('platform',function(){return 'Win32';});window.navigator.__defineGetter__('oscpu',function(){return 'null';});})()", null);
        super.onPageStarted(webView, str, bitmap);
    }

    /* JADX WARN: Not initialized variable reg: 4, insn: 0x0046: MOVE (r3 I:??[OBJECT, ARRAY]) = (r4 I:??[OBJECT, ARRAY]) (LINE:71), block:B:9:0x0046 */
    /* JADX WARN: Removed duplicated region for block: B:60:0x0124  */
    @Override // android.webkit.WebViewClient
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public final WebResourceResponse shouldInterceptRequest(WebView webView, WebResourceRequest webResourceRequest) throws Throwable {
        HttpURLConnection httpURLConnection;
        HttpURLConnection httpURLConnection2;
        String contentType;
        String string = webResourceRequest.getUrl().toString();
        Map<String, String> requestHeaders = webResourceRequest.getRequestHeaders();
        HttpURLConnection httpURLConnection3 = null;
        try {
            try {
                httpURLConnection = (HttpURLConnection) new URL(string).openConnection();
                try {
                    httpURLConnection.setRequestMethod(webResourceRequest.getMethod());
                    for (Map.Entry<String, String> entry : requestHeaders.entrySet()) {
                        httpURLConnection.setRequestProperty(entry.getKey(), entry.getValue());
                    }
                    httpURLConnection.connect();
                    contentType = httpURLConnection.getContentType();
                } catch (Exception e) {
                    e = e;
                    Log.e("Spotifuck", "Error intercepting request", e);
                    if (httpURLConnection != null) {
                        httpURLConnection.disconnect();
                    }
                    return null;
                }
            } catch (Throwable th) {
                th = th;
                httpURLConnection3 = httpURLConnection2;
                if (httpURLConnection3 != null) {
                    httpURLConnection3.disconnect();
                }
                throw th;
            }
        } catch (Exception e2) {
            e = e2;
            httpURLConnection = null;
        } catch (Throwable th2) {
            th = th2;
            if (httpURLConnection3 != null) {
            }
            throw th;
        }
        if (!string.contains("doubleclick.net") && !string.contains("googlesyndication.com") && !string.contains("fastly-insights.com") && !string.contains("sentry.io")) {
            if (contentType != null && contentType.equals("audio/mpeg") && !string.contains("podz-content") && !string.contains("gew4-spclient") && (string.contains("akamaized.net/audio/") || string.contains("scdn.co/audio/") || string.contains("scdn.co/mp3-ad/") || string.contains("spotifycdn.com/audio/") || string.contains("amillionads.com") || string.contains("2mdn.net") || string.contains("adxcel.com") || string.contains("adstudio-assets.scdn.co"))) {
                C0364f.deferMessage("adblock");
                WebResourceResponse webResourceResponse = new WebResourceResponse("audio/mpeg", null, webView.getContext().getAssets().open("silent.mp3"));
                httpURLConnection.disconnect();
                return webResourceResponse;
            }
            httpURLConnection.disconnect();
            return null;
        }
        HashMap map = new HashMap();
        map.put("Access-Control-Allow-Origin", "*");
        WebResourceResponse webResourceResponse2 = new WebResourceResponse("text/plain", "utf-8", 200, "OK", map, new ByteArrayInputStream(new byte[0]));
        httpURLConnection.disconnect();
        return webResourceResponse2;
    }
}
